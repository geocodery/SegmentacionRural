import subprocess
import sys
from datetime import *
import os
import socket

lista_ubigeos = ['090111', '090305', '090311', '090407', '090505', '090509', '090511', '090601']

#lista_ubigeos = ['010115', '010304', '010514', '010518', '010707', '020102', '020109', '020202', '020203', '020204', '020304', '020305', '020503', '020505', '020509', '020510', '020607', '020610', '020611', '021003', '021007', '021511', '021909', '022002', '022003', '022004', '030301', '030304', '030408', '030413', '030414', '030416', '030501', '030603', '030604', '030702', '030703', '030704', '030708', '030710', '040107', '040108', '040123', '040202', '040203', '040207', '040301', '040306', '040310', '040313', '040506', '040603', '040702', '040705', '050113', '050114', '050203', '050301', '050607', '050702', '050911', '051106', '060101', '060103', '060105', '060109', '060307', '060603', '060606', '060904', '061304', '080203', '080408', '080708', '080904', '080905', '080906', '080908', '080909', '080912', '080914', '081210', '089999', '090111', '090305', '090311', '090407', '090505', '090509', '090511', '090601', '100107', '100109', '100113', '100313', '100317', '100323', '100503', '100504', '100701', '100702', '100902', '101101', '101108', '110111', '110112', '110202', '110505', '120418', '120426', '120431', '120601', '120607', '120805', '120806', '120904', '130302', '130701', '130902', '130903', '130905', '130906', '130907', '130908', '131008', '140112', '140117', '140203', '140306', '140309', '150126', '150502', '150508', '150510', '150512', '150705', '150714', '150716', '150718', '151001', '151007', '151009', '151011', '151026', '160202', '160303', '180210', '190109', '190110', '190113', '200202', '200205', '200305', '200408', '210101', '210102', '210108', '210109', '210110', '210111', '210112', '210113', '210115', '210201', '210202', '210207', '210208', '210210', '210211', '210212', '210214', '210303', '210304', '210305', '210307', '210309', '210310', '210402', '210403', '210502', '210503', '210601', '210605', '210807', '210903', '211004', '211005', '211202', '211203', '211204', '211205', '211207', '211209', '211210', '211302', '211304', '220708', '230101', '230103', '230109', '230111', '230206', '250102', '250103', '250105', '250107', '250201', '250203', '250204', '250301', '250302', '250303', '250304']

lista_errores = []
for ubigeo in lista_ubigeos:
    print ubigeo
    proceso = subprocess.Popen("python main2.py {}".format(ubigeo), shell=True, stderr=subprocess.PIPE)
    errores = proceso.stderr.read()
    errores_print = '{}'.format(errores)
    print errores_print
    if len(errores_print) > 0:
        lista_errores.append(ubigeo)
        print 'algo salio mal'
    else:
        print 'nada salio mal'

print lista_errores